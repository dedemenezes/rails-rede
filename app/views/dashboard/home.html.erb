<%= render 'shared/breadcrumbs' %>

<div class="col-12 col-sm-6 map__wrapper"
                   data-controller="map"
                   data-map-markers-value="<%= [] %>"
                   data-map-style-value="mapbox://styles/mapbox/streets-v10"
                   data-map-tilesets-value="<%= @tilesets.to_json %>"
                   data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  <div class="map__container"
                      style="height: 52vh;"
                      data-map-target="mapContainer"
                      data-action="click->map#coverWarning">
  </div>
  <div class="map__cover h-100 w-100"
                    data-map-target="cover">
    <p class='mb-0'>Ative uma das opções de navegação</p>
    <%= image_tag 'arrow-up.svg', width: '40px', style: 'position: initial' %>
  </div>
  <nav id="listing-group" data-map-target="listingGroup" class="listing-group">
    <input type="checkbox" data-map-target="menuOption" id="scrollZoom">
    <label for="scrollZoom">Zoom com scroll</label>
    <input type="checkbox" data-map-target="menuOption" id="dragPan">
    <label for="dragPan">Arrastar e navegar</label>
  </nav>
</div>

<%= simple_form_for [:dashboard, :mapbox, Tileset.new],
              data: {
                controller: 'map--tileset--create',
                map__tileset__create_api_key_value: ENV['MAPBOX_SUPER_KEY'],
                action: 'submit->map--tileset--create#upload',
                 map__tileset__create_target: 'form',
              } do |f| %>
  <%= f.input :name, data: { map__tileset__create_target: 'nameField', action: 'blur->map--tileset--create#enableSubmitButton'} %>
  <%= f.file_field :tileset, class: 'form-control', data: {action: 'change->map--tileset--create#fileSelected', map__tileset__create_target: 'fileField',  } %>
  <%= f.submit 'Salvar', class: 'btn btn-primary', data: { map__tileset__create_target: 'submit' } %>
<% end %>
